
<!DOCTYPE html>
<html xmlns:tuna>
    <head>
        <meta charset="utf-8" />

        <title>Панель управления</title>

        <link rel="stylesheet" type="text/css" href="/css/bootstrap.css" />

        <style type="text/css">
            body { padding-top: 60px; }
            a { cursor: pointer; }

            .hide { display: none !important }
            .show { display: inherit !important }

            .page { display: none; }
            .page.active { display: inherit; }
        </style>
    </head>

    <body class="j-navigation j-template-transformer container"
          data-name="body-container"
          data-template-id="global_template">

        <form action="/api/" method="POST" target="api_frame"
      class="j-form j-popup form-horizontal hide"
      data-name="sign-in" data-record-type="bakery">

    <input type="hidden" name="method" value="users.signIn" />
    <input type="hidden" name="format" value="frame-callback" />

    <div class="modal">
        <div class="modal-header">
            <h3>Войти</h3>
        </div>

        <div class="modal-body">
            <div class="j-form-message alert alert-error hide"></div>

            <fieldset>

                
<div class="j-email-input control-group">
    <label class="control-label">Email:</label>
    <div class="controls">
        <div class="input">
            <input class="    "
                   type="text"
                   name="email" />
        </div>
        
    <p class="help-block">
        <span class="j-message">Адрес, который вы указали при регистрации.</span>
        
    </p>


    </div>
</div>


                
<div class="j-password-input control-group">
    <label class="control-label">Пароль:</label>
    <div class="controls">
        <div class="input">
            <input class="    "
                   type="password"
                   name="password" />
        </div>
        
    <p class="help-block">
        <span class="j-message">Пароль который вы указали при регистрации.</span>
        
    </p>


    </div>
</div>



            </fieldset>
        </div>

        <div class="modal-footer">
            <input type="submit" class="btn btn-primary" value="Войти" />
        </div>
    </div>
    <div class="modal-backdrop"></div>
</form>
        <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <!--a class="j-navigation-link brand" href="#"
               data-href="orders/table">
                Фото на торте
            </a-->

            <ul class="j-navigation-menu nav">
                <li class="j-navigation-link" data-href="orders/table">
                    <a>Заказы</a>
                </li>
                <li class="j-navigation-link" data-href="recipes/table">
                    <a>Рецепты</a>
                </li>
                <li class="j-navigation-link" data-href="dimensions/table">
                    <a>Формы</a>
                </li>
                <li class="j-navigation-link t-bakery-hidden"
                    data-href="users/table">

                    <a>Кондитерские</a>
                </li>

                <li class="j-navigation-link" data-href="decorations">
                    <a>Декорации</a>
                </li>

                <li class="j-navigation-link" data-href="application">
                    <a>Приложение</a>
                </li>

                <li class="j-navigation-link" data-href="profile">
                    <a>Профиль</a>
                </li>
            </ul>

            <form action="/api/" method="POST" target="api_frame"
                  class="j-form navbar-form pull-right"
                  data-name="sign-out">

                <input type="hidden" name="method" value="users.signOut" />
                <input type="hidden" name="format" value="frame-callback" />

                <button type="submit" class="btn">Выход</button>
            </form>

            <ul class="nav pull-right">
                <li>
                    <a>
                        <span class="t-current-user-role-name"></span> :
                        <i class="icon-user icon-white"></i>
                        <span class="t-current-user-email"></span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>        <div id="orders_page"
     class="j-navigation-page j-navigation j-control-container
            t-current-bakery-exist page active"
     data-name="orders">

    <div class="j-navigation-page page active"
     data-name="table">

    <div class="page-header">
        <h1>Заказы</h1>
    </div>

    <div class="row">
        <div class="span12">

            <table class="table table-bordered table-striped">
                <thead>
                <tr>
                    <th>№</th>
                    <th>Время заказа</th>
                    <th>Время доставки</th>
                    <th>Клиент</th>
                    <th>Стоимость</th>
                    <th>Статус</th>
                    <th>Доставка</th>
                    <th>Оплата</th>
                    <th>Действия</th>
                </tr>
                </thead>
                <tbody class="j-template-transformer j-button-group t-orders-list"
                       data-name="orders-list"
                       data-template-id="orders_list_template"></tbody>
            </table>

        </div>
    </div>

</div>

<div id="edit_order_page"
     class="j-navigation-page j-control-container page"
     data-name="edit">

    <form action="/api/" method="POST" target="api_frame"
      class="j-form j-template-transformer form-horizontal"
      data-template-id="order_info_template"
      data-name="edit-order-form"
      data-record-type="order">

    <input type="hidden" name="method" value="orders.edit" />
    <input type="hidden" name="format" value="frame-callback" />

    <input type="hidden" name="id" class="t-id" />

    <div class="page-header">
        <div class="row">
            <div class="span5">
                <h1>Заказ № <span class="t-index"></span></h1>
            </div>
            <div class="span7">
                <div class="btn-group pull-right">
                    <a class="j-navigation-link btn btn-large"
                       data-action="back">
                        Назад
                    </a>
                    <a class="t-print-order btn btn-large" target="_blank">
                        Версия для печати
                    </a>
                    <button type="submit"
                            class="btn btn-large btn-primary">
                        Сохранить изменения
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="row">

        <div class="span6">

            <fieldset>
                <legend>Данные торта</legend>

                <div class="control-group pagination-centered">
                    <img class="t-cake-image-url" alt="Торт" />
                </div>

                
    <div class="control-group">
        <label class="control-label">Рецепт</label>
        <div class="controls">
            <span class="uneditable-input             t-recipe-name
    ">
                
            </span>
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>


                
    <div class="control-group">
        <label class="control-label">Вес (кг.)</label>
        <div class="controls">
            <span class="uneditable-input             t-cake-weight
    ">
                
            </span>
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>


                
    <div class="control-group">
        <label class="control-label">Фото: </label>
        <div class="controls">
            <a class="            t-cake-photo
            t-cake-photo-url
            hide
     btn" target="_blank">
                Скачать
            </a>
        </div>
    </div>



            </fieldset>

            <fieldset>
                <legend>Статус</legend>

                
    <div class="j-status-input control-group">
        <label class="control-label">Статус заказа:</label>
        <div class="controls">

                            <label class="radio inline">
                    <input value="0" type="radio" name="status" />
                    <span class="label label-important">Новый</span>
                </label>
                            <label class="radio inline">
                    <input value="1" type="radio" name="status" />
                    <span class="label label-success">Подтвержден</span>
                </label>
                            <label class="radio inline">
                    <input value="2" type="radio" name="status" />
                    <span class="label label-invert">Отклонен</span>
                </label>
            
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>



                
    <div class="j-delivery_status-input control-group">
        <label class="control-label">Статус доставки:</label>
        <div class="controls">

                            <label class="radio inline">
                    <input value="0" type="radio" name="delivery_status" />
                    <span class="label label-important">Подготовка</span>
                </label>
                            <label class="radio inline">
                    <input value="1" type="radio" name="delivery_status" />
                    <span class="label label-info">В доставке</span>
                </label>
                            <label class="radio inline">
                    <input value="2" type="radio" name="delivery_status" />
                    <span class="label label-success">Доставлено</span>
                </label>
            
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>



                
    <div class="j-payment_status-input control-group">
        <label class="control-label">Статус оплаты:</label>
        <div class="controls">

                            <label class="radio inline">
                    <input value="0" type="radio" name="payment_status" />
                    <span class="label label-important">Не оплачен</span>
                </label>
                            <label class="radio inline">
                    <input value="1" type="radio" name="payment_status" />
                    <span class="label label-success">Оплачен</span>
                </label>
            
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>



            </fieldset>

        </div>

        <div class="span6">

            <fieldset>
                <legend>Данные клиента</legend>

                
    <div class="control-group">
        <label class="control-label">Имя</label>
        <div class="controls">
            <span class="uneditable-input             t-client-name
    ">
                
            </span>
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>


                
    <div class="control-group">
        <label class="control-label">Телефон</label>
        <div class="controls">
            <span class="uneditable-input             t-client-phone
    ">
                
            </span>
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>


                
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <span class="uneditable-input             t-client-email
    ">
                
            </span>
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>


                
    <div class="control-group">
        <label class="control-label">Сайт</label>
        <div class="controls">
            <span class="uneditable-input             t-client-network-name
    ">
                
            </span>
            
    <p class="help-block">
        <span class="j-message">Сайт, с которого поступил заказ</span>
        
    </p>


        </div>
    </div>



            </fieldset>

            <fieldset>
                <legend>Данные доставки</legend>

                
    <div class="control-group">
        <label class="control-label">Адрес</label>
        <div class="controls">
            <span class="uneditable-input             t-delivery-address
    ">
                
            </span>
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>


                
    <div class="control-group">
        <label class="control-label">Email</label>
        <div class="controls">
            <span class="uneditable-input             t-client-email
    ">
                
            </span>
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>


                
    <div class="control-group">
        <label class="control-label">Время</label>
        <div class="controls">
            <span class="uneditable-input             t-delivery-date
    ">
                
            </span>
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>


                
    <div class="control-group">
        <label class="control-label">Комментарий</label>
        <div class="controls">
            <span class="uneditable-input             t-delivery-comment
    ">
                
            </span>
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>


                
    <div class="control-group">
        <label class="control-label">Записка</label>
        <div class="controls">
            <span class="uneditable-input             t-delivery-message
    ">
                
            </span>
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>



            </fieldset>

            <fieldset>
                <legend>Данные оплаты</legend>

                
    <div class="control-group">
        <label class="control-label">Сумма (руб.)</label>
        <div class="controls">
            <span class="uneditable-input             t-payment-price
    ">
                
            </span>
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>


                
    <div class="control-group">
        <label class="control-label">Метод оплаты</label>
        <div class="controls">
            <span class="uneditable-input     ">
                Наличными
            </span>
            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>



            </fieldset>
        </div>
    </div>
</form></div>

<div class="j-control-container hide">

    <tuna:template id="order_info_template">

        
    <tuna:attr tuna:name="value"
               tuna:path="id"
                              tuna:target="t-id" />


        
    <tuna:attr tuna:name="href"
               tuna:path="id"
                tuna:filter="/api/?method=orders.print&amp;id=$$"                tuna:target="t-print-order" />



        
    <tuna:spot tuna:path="index"
                           tuna:target="t-index" />



        
    <tuna:spot tuna:path="cake/dimension/weight"
                           tuna:target="t-cake-weight" />


        
    <tuna:attr tuna:name="src"
               tuna:path="cake/imageUrl"
                              tuna:target="t-cake-image-url" />



            
        <tuna:if tuna:path="cake/photoUrl" tuna:notset
                                     tuna:class="hide"
                                  tuna:target="t-cake-photo" />

    
        
    <tuna:attr tuna:name="href"
               tuna:path="cake/photoUrl"
                              tuna:target="t-cake-photo-url" />



        
    <tuna:spot tuna:path="recipe/name"
                           tuna:target="t-recipe-name" />



        
    <tuna:spot tuna:path="client/name"
                           tuna:target="t-client-name" />


        
    <tuna:spot tuna:path="client/phone"
                           tuna:target="t-client-phone" />


        
    <tuna:spot tuna:path="client/email"
                           tuna:target="t-client-email" />


        
    <tuna:spot tuna:path="client/networkName"
                           tuna:target="t-client-network-name" />



        
    <tuna:spot tuna:path="delivery/address"
                           tuna:target="t-delivery-address" />


        
    <tuna:spot tuna:path="delivery/comment"
                           tuna:target="t-delivery-comment" />


        
    <tuna:spot tuna:path="delivery/message"
                           tuna:target="t-delivery-message" />


        
    <tuna:spot tuna:path="delivery/date"
                           tuna:target="t-delivery-date" />



        
    <tuna:spot tuna:path="payment/totalPrice"
                           tuna:target="t-payment-price" />





    </tuna:template>

    <tuna:template id="order_row_template">

        
    <tuna:attr tuna:name="data-order-id"
               tuna:path="id"
                              tuna:target="t-id" />



        
    <tuna:spot tuna:path="index"
                           tuna:target="t-index" />


        
    <tuna:spot tuna:path="date"
                           tuna:target="t-date" />



        
    <tuna:spot tuna:path="statusName"
                           tuna:target="t-status-label" />


        
    <tuna:spot tuna:path="deliveryStatusName"
                           tuna:target="t-delivery-status-label" />


        
    <tuna:spot tuna:path="paymentStatusName"
                           tuna:target="t-payment-status-label" />



        
    <tuna:spot tuna:path="delivery/date"
                           tuna:target="t-delivery-date" />


        
    <tuna:spot tuna:path="client/name"
                           tuna:target="t-client-name" />


        
    <tuna:spot tuna:path="payment/totalPrice"
                           tuna:target="t-payment-price" />



                        
        <tuna:if tuna:path="status" tuna:eq="0"
                                 tuna:class="label-important"
                                 tuna:target="t-status-label" />

    
                
        <tuna:if tuna:path="status" tuna:eq="1"
                                 tuna:class="label-success"
                                 tuna:target="t-status-label" />

    
    

                        
        <tuna:if tuna:path="deliveryStatus" tuna:eq="0"
                                 tuna:class="label-important"
                                 tuna:target="t-delivery-status-label" />

    
                
        <tuna:if tuna:path="deliveryStatus" tuna:eq="1"
                                 tuna:class="label-info"
                                 tuna:target="t-delivery-status-label" />

    
                
        <tuna:if tuna:path="deliveryStatus" tuna:eq="2"
                                 tuna:class="label-success"
                                 tuna:target="t-delivery-status-label" />

    
    

                        
        <tuna:if tuna:path="paymentStatus" tuna:eq="0"
                                 tuna:class="label-important"
                                 tuna:target="t-payment-status-label" />

    
                
        <tuna:if tuna:path="paymentStatus" tuna:eq="1"
                                 tuna:class="label-success"
                                 tuna:target="t-payment-status-label" />

    
    

    </tuna:template>

    <tuna:template id="orders_list_template">
        
    <tuna:list tuna:target="t-orders-list" tuna:path="/"
               tuna:item-renderer-id="orders_list_item_renderer"
               tuna:item-template-id="order_row_template"
               tuna:key-path="id" />


    </tuna:template>

    <table>
        <tbody>
        <tr id="orders_list_item_renderer">
            <td class="t-index"></td>
            <td class="t-date"></td>
            <td class="t-delivery-date"></td>
            <td class="t-client-name"></td>
            <td class="t-payment-price"></td>
            <td><span class="t-status-label label"></span></td>
            <td><span class="t-delivery-status-label label"></span></td>
            <td><span class="t-payment-status-label label"></span></td>
            <td>
                <ul class="nav nav-list">
                    <li>
                        <a class="j-navigation-link t-id"
                           data-href="edit">
                            <i class="icon-edit"></i> Редактировать
                        </a>
                    </li>
                </ul>
            </td>
        </tr>
        </tbody>
    </table>

</div>

</div>

<div id="recipes_page"
     class="j-navigation-page j-navigation j-control-container page
            t-current-bakery-exist"
     data-name="recipes">

    <div class="j-navigation-page page active"
     data-name="table">

    <div class="page-header">
        <div class="row">
            <div class="span6">
                <h1>Рецепты</h1>
            </div>
            <div class="span6">
                <a class="j-navigation-link
                          btn btn-large btn-primary pull-right"
                   data-href="add">
                    Добавить рецепт
                </a>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="j-template-transformer j-button-group span12"
             data-template-id="recipe_table_template"
             data-name="recipe-table">

            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>Название</th>
                        <th>Картинка</th>
                        <th>Описание</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody class="t-recipe-list"></tbody>
            </table>

        </div>
    </div>

</div>

<div id="add_recipe_page"
     class="j-navigation-page j-control-container page"
     data-name="add">

    <div class="page-header">

    <div class="row">
        <div class="span6">
            <h1>Добавление нового рецепта</h1>
        </div>
        <div class="span6">
            <a class="j-navigation-link btn btn-large pull-right"
               data-action="back">
               Назад
            </a>
        </div>
    </div>
</div>

<div class="row">
    <div class="span12">

        <form action="/api/" method="POST" target="api_frame"
              enctype="multipart/form-data"
              class="j-form form-horizontal"
              data-name="add-recipe"
              data-record-type="recipe">

            <input type="hidden" name="method" value="recipes.add" />
            <input type="hidden" name="format" value="frame-callback" />

            <input type="hidden" name="bakery_id" class="t-current-bakery-id" />

            <div class="j-form-message alert alert-error hide"></div>

            <fieldset>

                
<div class="j-name-input control-group">
    <label class="control-label">Название:</label>
    <div class="controls">
        <div class="input">
            <input class="    "
                   type="text"
                   name="name" />
        </div>
        
    <p class="help-block">
        <span class="j-message">Общеизвестное название рецепта.</span>
        
    </p>


    </div>
</div>


                
    <div class="j-desc-input control-group">
        <label class="control-label">Описание:</label>
        <div class="controls">
            <div class="input">
                <textarea class="    "
                          rows="7"
                          name="desc"></textarea>
            </div>
            
    <p class="help-block">
        <span class="j-message">Подробное описание рецепта.</span>
        
    </p>


        </div>
    </div>


                
<div class="j-image-input control-group">
    <label class="control-label">Картинка:</label>
    <div class="controls">
        <div class="input">
            <input class="    "
                   type="file"
                   name="image" />
        </div>
        
    <p class="help-block">
        <span class="j-message">Картинка в списке и в окне описания рецептов.</span>
        
    </p>


    </div>
</div>


                
    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Добавить</button>
    </div>



            </fieldset>
        </form>
    </div>
</div></div>

<div id="edit_recipe_page"
     class="j-navigation-page j-control-container page"
     data-name="edit">

    <form action="/api/" method="POST" target="api_frame"
      class="j-template-transformer j-form"
      data-template-id="recipe_template"
      data-name="edit-recipe-form"
      data-record-type="recipe">

    <input type="hidden" name="method" value="recipes.edit" />
    <input type="hidden" name="format" value="frame-callback" />
    <input type="hidden" name="id" class="t-id-input" />

    <div class="page-header">

        <div class="row">
            <div class="span6">
                <h1 class="t-name">Тирамису</h1>
            </div>
            <div class="span6">
                <a class="j-navigation-link btn btn-large pull-right"
                   data-action="back">
                    Назад
                </a>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="span6">
            <p>
                <span class="t-desc"></span>
                <img class="t-image" alt src />
            </p>
        </div>

        <div class="span5 offset1">
            
           <table class="table">
                <thead>
                    <tr>
                        <th>Вес (кг.)</th>
                        <th>Цена (руб.)</th>
                    </tr>
                </thead>
                <tbody class="t-price-list"></tbody>
            </table>

            <div class="t-current-bakery-exist form-actions">
                <button type="submit" class="btn btn-primary">
                    Сохранить
                </button>
            </div>

        </div>
    </div>

</form>




</div>

<div class="j-control-container hide">

    <tuna:template id="recipe_table_template">
        
    <tuna:list tuna:target="t-recipe-list" tuna:path="/"
               tuna:item-renderer-id="recipe_row_renderer"
               tuna:item-template-id="recipe_template"
               tuna:key-path="id" />


    </tuna:template>

    <tuna:template id="recipe_template">

        
    <tuna:attr tuna:name="data-recipe-id"
               tuna:path="id"
                              tuna:target="t-id" />


        
    <tuna:attr tuna:name="value"
               tuna:path="id"
                              tuna:target="t-id-input" />



        
    <tuna:attr tuna:name="src"
               tuna:path="imageUrl"
                              tuna:target="t-image" />



        
    <tuna:attr tuna:name="alt"
               tuna:path="name"
                tuna:filter="Рецепт: $$"                tuna:target="t-image" />


        
    <tuna:spot tuna:path="name"
                           tuna:target="t-name" />



        
    <tuna:spot tuna:path="desc"
                           tuna:target="t-desc" />



        
    <tuna:list tuna:target="t-price-list" tuna:path="dimensionPrices"
               tuna:item-renderer-id="dimension_price_renderer"
               tuna:item-template-id="dimension_price_template"
               tuna:key-path="$key" />



    </tuna:template>

    <tuna:template id="dimension_price_template">
        
    <tuna:spot tuna:path="weight"
                           tuna:target="t-weight" />



        
    <tuna:attr tuna:name="value"
               tuna:path="price"
                              tuna:target="t-price" />


        
    <tuna:attr tuna:name="name"
               tuna:path="weight"
                tuna:filter="dimension_prices[$$]"                tuna:target="t-price" />


    </tuna:template>

    <table>
        <tbody>
        <tr id="dimension_price_renderer">
            <td class="t-weight">1</td>
            <td><input type="text" class="t-price input-mini" /></td>
        </tr>

        <tr id="recipe_row_renderer">
            <td class="t-name"></td>
            <td><img class="t-image" width="90" height="90" alt="Рецепт" /></td>
            <td class="t-desc"></td>
            <td>
                <ul class="nav nav-list">
                    <li>
                        <a class="j-navigation-link t-id"
                           data-href="edit">
                            <i class="icon-edit"></i> Редактировать
                        </a>
                    </li>
                    <li>
                        <a class="j-button t-id"
                           data-action="delete">
                            <i class="icon-trash"></i> Удалить
                        </a>
                    </li>
                </ul>
            </td>
        </tr>
        </tbody>
    </table>

</div></div>

<div id="dimensions_page"
     class="j-navigation-page j-navigation j-control-container page
            t-current-bakery-exist"
     data-name="dimensions">

    <div class="j-navigation-page page active"
     data-name="table">

    <div class="page-header">
        <div class="row">
            <div class="span6">
                <h1>Формы</h1>
            </div>
            <div class="span6">
                <a class="j-navigation-link
                          btn btn-large btn-primary pull-right"
                   data-href="add">
                    Добавить размер
                </a>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="span12 j-template-transformer j-button-group"
             data-template-id="dimensions_list_template"
             data-name="dimensions-list">

            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>Форма</th>
                        <th>Вес (кг.)</th>
                        <th>Размер (см.)</th>
                        <th>Количество людей</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody class="t-dimensions-list"></tbody>
            </table>

        </div>
    </div>

</div>

<div class="j-navigation-page page"
     data-name="add">

    <div class="page-header">

    <div class="row">
        <div class="span6">
            <h1>Добавление новой формы</h1>
        </div>
        <div class="span6">
            <a class="j-navigation-link btn btn-large pull-right"
               data-action="back">
               Назад
            </a>
        </div>
    </div>
</div>

<div class="row">
    <div class="span12">

        <form action="/api/" method="POST" target="api_frame"
              class="j-form form-horizontal"
              data-name="add-dimension"
              data-record-type="dimension">

            <input type="hidden" name="method" value="dimensions.add" />
            <input type="hidden" name="format" value="frame-callback" />

            <input type="hidden" name="bakery_id" class="t-current-bakery-id" />

            <div class="j-form-message alert alert-error hide"></div>

            <fieldset>

                <div class="j-shape-input control-group">
                    <label class="control-label">Форма:</label>
                    <div class="controls">
                        <div class="input">
                            <select class="input-medium" name="shape">
                                <option value="round">Круг</option>
                                <option value="rect">Прямоугольник</option>
                            </select>
                        </div>
                        <p class="j-message help-block"></p>
                    </div>
                </div>

                <div class="j-weight-input control-group">
                    <label class="control-label">Вес (кг.):</label>
                    <div class="controls">
                        <div class="input">
                            <input class="input-mini" name="weight" type="text"  />
                        </div>
                        <p class="j-message help-block"></p>
                    </div>
                </div>

                <div class="j-size-input control-group">
                    <label class="control-label">Размер (см.):</label>
                    <div class="controls">
                        <div class="input">
                            <input class="input-mini" name="size" type="text"  />
                        </div>
                        <p class="j-message help-block"></p>
                    </div>
                </div>

                <div class="j-persons_count-input control-group">
                    <label class="control-label">Количество людей:</label>
                    <div class="controls">
                        <div class="input">
                            <input class="input-mini" name="persons_count" type="text"  />
                        </div>
                        <p class="j-message help-block"></p>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        Добавить
                    </button>
                </div>

            </fieldset>
        </form>
    </div>
</div></div>

<div class="j-control-container hide">

    <tuna:template id="dimensions_list_template">
        <tuna:list tuna:target="t-dimensions-list" tuna:path=""
                   tuna:item-renderer-id="dimensions_list_item_renderer"
                   tuna:item-template-id="dimension_template"
                   tuna:key-path="id" />
    </tuna:template>

    <tuna:template id="dimension_template">
        <tuna:attr tuna:name="data-dimension-id" tuna:path="id"
                   tuna:target="t-id" />

        <tuna:spot tuna:target="t-shape-name" tuna:path="shapeName" />
        <tuna:spot tuna:target="t-weight" tuna:path="weight" />
        <tuna:spot tuna:target="t-size" tuna:path="size" />
        <tuna:spot tuna:target="t-persons-count" tuna:path="personsCount" />

        <tuna:attr tuna:name="value" tuna:path="id"
                   tuna:target="t-id-checkbox" />

    </tuna:template>

    <table>
        <tbody>
            <tr id="dimensions_list_item_renderer">
                <td class="t-shape-name"></td>
                <td class="t-weight"></td>
                <td class="t-size"></td>
                <td class="t-persons-count"></td>
                <td>
                    <ul class="nav nav-list">
                        <li>
                            <a class="j-button t-id"
                               data-action="delete">
                                <i class="icon-trash"></i> Удалить
                            </a>
                        </li>
                    </ul>
                </td>
            </tr>
        </tbody>
    </table>

</div></div>

<div id="decorations_page"
     class="j-navigation-page j-control-container page
            t-current-bakery-exist"
     data-name="decorations">

    <div class="j-navigation-page page active"
     data-name="table">

    <div class="page-header">
        <div class="row">
            <div class="span12">
                <h1>Декорации</h1>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="span6">
            <h2>Используемые</h2>

            <form action="/api/" method="POST" target="api_frame"
                  class="j-form j-template-transformer j-button-group form-inline"
                  data-template-id="available_decorations_list_template"
                  data-name="available-decorations-list"
                  data-record-type="bakery">

                <input type="hidden" name="method" value="users.editBakery" />
                <input type="hidden" name="format" value="frame-callback" />

                <input type="hidden" name="id" class="t-current-bakery-id" />

                <div class="j-form-message alert alert-error hide"></div>

                <ul class="t-decorations-list nav thumbnails"></ul>

                <button class="btn btn-primary" type="submit">Сохранить</button>
            </form>
        </div>
        <div class="span6">
            <h2>Доступные</h2>

            <ul class="j-template-transformer j-button-group
                       t-decorations-list nav thumbnails"
                data-name="decorations-list"
                data-template-id="decorations_list_template">

            </ul>

            <a class="j-popup-button t-bakery-hidden btn btn-primary"
               data-name="add-decoration"
               data-popup-id="add_decoration_popup">
                Добавить
            </a>
        </div>
    </div>
</div>

<form id="add_decoration_popup" action="/api/" method="POST" target="api_frame"
      enctype="multipart/form-data"
      class="j-form form-horizontal hide"
      data-name="add-decoration"
      data-record-type="decoration">

    <input type="hidden" name="method" value="decorations.add" />
    <input type="hidden" name="format" value="frame-callback" />

    <div class="modal">
        <div class="modal-header">
            <h3>Добавить элемент оформления</h3>
        </div>

        <div class="modal-body">
            <div class="j-form-message alert alert-error hide"></div>

            <fieldset>

                <div class="j-name-input control-group">
                    <label class="control-label"> Имя: </label>
                    <div class="controls">
                        <div class="input">
                            <input name="name" type="text" />
                        </div>
                        <p class="j-message help-block"></p>
                    </div>
                </div>

                <div class="j-image-input control-group">
                    <label class="control-label"> Картинка: </label>
                    <div class="controls">
                        <div class="input">
                            <input name="image" type="file" />
                        </div>
                        <p class="j-message help-block"></p>
                    </div>
                </div>

                <div class="j-is_autorotate-input control-group">
                    <label class="control-label"> Автоповорот: </label>
                    <div class="controls">
                        <div class="input">
                            <input name="is_autorotate" type="checkbox" value="1" />
                        </div>
                        <p class="j-message help-block"></p>
                    </div>
                </div>

                <div class="j-group-input control-group">
                    <label class="control-label"> Группа: </label>
                    <div class="controls">
                        <label class="radio inline">
                            <input name="group" type="radio" value="0" checked> 1
                        </label>
                        <label class="radio inline">
                            <input name="group" type="radio" value="1"> 2
                        </label>
                        <label class="radio inline">
                            <input name="group" type="radio" value="2"> 3
                        </label>
                        <label class="radio inline">
                            <input name="group" type="radio" value="2"> 4
                        </label>

                        <p class="j-message help-block"></p>
                    </div>
                </div>

            </fieldset>
        </div>

        <div class="modal-footer">
            <a class="j-popup-close btn">Закрыть</a>
            <input type="submit" class="btn btn-primary" value="Добавить" />
        </div>
    </div>
    <div class="modal-backdrop"></div>
</form>
<div class="j-control-container hide">

    <tuna:template id="decorations_list_template">
        <tuna:list tuna:item-renderer-id="decorations_list_item_renderer"
                   tuna:item-template-id="decoration_template"
                   tuna:key-path="id"
                   tuna:path="/"
                   tuna:target="t-decorations-list" />

    </tuna:template>

    <tuna:template id="available_decorations_list_template">
        <tuna:list tuna:item-renderer-id="available_decorations_list_item_renderer"
                   tuna:item-template-id="decoration_template"
                   tuna:key-path="id"
                   tuna:path="/"
                   tuna:target="t-decorations-list" />

    </tuna:template>

    <tuna:template id="decoration_template">
        <tuna:attr tuna:name="data-decoration-id" tuna:path="id"
                   tuna:target="t-id" />

        <tuna:attr tuna:name="name" tuna:path="id"
                   tuna:filter="decoration_prices[$$]"
                   tuna:target="t-id-input" />

        <tuna:attr tuna:name="value" tuna:path="price"
                   tuna:target="t-id-input" />

        <tuna:attr tuna:name="src" tuna:path="imageUrl"
                   tuna:target="t-image" />

        <tuna:spot tuna:path="name"
                   tuna:target="t-name" />

    </tuna:template>

    <ul>
        <li id="decorations_list_item_renderer" class="span6">
            <a class="thumbnail">
                <span class="j-button t-id pull-left"
                      data-action="add">
                    <i class="icon-arrow-left"></i><span class="t-name"></span>
                </span>

                <img class="t-image" width="30" alt="Элемент декорации" />
            </a>
        </li>
        <li id="available_decorations_list_item_renderer" class="span6">
            <a class="thumbnail">

                <span class="j-button t-id pull-right"
                      data-action="remove">
                    <span class="t-name"></span><i class="icon-arrow-right"></i>
                </span>

                Цена: <input class="t-id-input input-small" type="text" />

                <img class="t-image pull-right" width="30" alt="Элемент декорации" />
            </a>
        </li>
    </ul>

</div></div>

<div id="users_page"
     class="j-navigation-page j-navigation j-control-container page"
     data-name="users">

    <div class="j-navigation-page page active"
     data-name="table">

    <div class="page-header">
        <div class="row">
            <div class="span6">
                <h1>Кондитерские</h1>
            </div>
            <div class="span6">
                <a class="j-navigation-link
                          btn btn-large btn-primary pull-right"
                   data-href="add">
                    Добавить кондитерскую
                </a>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="j-template-transformer j-button-group span12"
             data-template-id="bakeries_list_template"
             data-name="list">

            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th>Имя</th>
                        <th>Email</th>
                        <th>Город</th>
                        <th>Цена доставки</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody class="t-list"></tbody>
            </table>
        </div>
    </div>

</div>

<div class="j-navigation-page page"
     data-name="add">

    <div class="page-header">

    <div class="row">
        <div class="span8">
            <h1>Добавление новой кондитерской</h1>
        </div>
        <div class="span4">
            <a class="j-navigation-link btn btn-large pull-right"
               data-action="back">
               Назад
            </a>
        </div>
    </div>
</div>

<div class="row">
    <div class="span12">

        <form action="/api/" method="POST" target="api_frame"
              class="j-form form-horizontal"
              data-name="add"
              data-record-type="bakery">

            <input type="hidden" name="method" value="users.addBakery" />
            <input type="hidden" name="format" value="frame-callback" />

            <div class="j-form-message alert alert-error hide"></div>

            <fieldset class="j-template-transformer"
                      data-name="cities-list"
                      data-template-id="cities_list_template">

                
<div class="j-name-input control-group">
    <label class="control-label">Имя:</label>
    <div class="controls">
        <div class="input">
            <input class="    "
                   type="text"
                   name="name" />
        </div>
        
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


    </div>
</div>


                
<div class="j-email-input control-group">
    <label class="control-label">Email:</label>
    <div class="controls">
        <div class="input">
            <input class="    "
                   type="text"
                   name="email" />
        </div>
        
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


    </div>
</div>


                
<div class="j-password-input control-group">
    <label class="control-label">Пароль:</label>
    <div class="controls">
        <div class="input">
            <input class="    "
                   type="password"
                   name="password" />
        </div>
        
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


    </div>
</div>



                
    <div class="j-city_id-input control-group">
        <label class="control-label">Город:</label>
        <div class="controls">
            <div class="input">
                <select class="            t-list
    "
                        name="city_id">

                    
                </select>
            </div>

            
    <p class="help-block">
        <span class="j-message"></span>
        <a class="j-button" data-name="add-city">Добавить город</a>
    </p>


        </div>
    </div>



                
<div class="j-delivery_price-input control-group">
    <label class="control-label">Цена доставки:</label>
    <div class="controls">
        <div class="input">
            <input class="    "
                   type="text"
                   name="delivery_price" />
        </div>
        
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


    </div>
</div>


                
    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Добавить</button>
    </div>



            </fieldset>
        </form>
    </div>
</div>

<div class="j-control-container hide">
    <tuna:template id="cities_list_template">
        <tuna:list tuna:path=""
                   tuna:target="t-list"
                   tuna:item-renderer-id="option_renderer"
                   tuna:item-template-id="city_option_template"
                   tuna:key-path="id" />
    </tuna:template>

    <tuna:template id="city_option_template">
        <tuna:attr tuna:name="value"
                   tuna:path="id"
                   tuna:target="t-option" />

        <tuna:spot tuna:path="name"
                   tuna:target="t-option" />
    </tuna:template>

</div>

<form action="/api/" method="POST" target="api_frame"
      class="j-form j-popup form-horizontal hide"
      data-name="add-city"
      data-record-type="city">

    <input type="hidden" name="method" value="cities.add" />
    <input type="hidden" name="format" value="frame-callback" />

    <div class="modal">
        <div class="modal-header">
            <h3>Добавить город</h3>
        </div>

        <div class="modal-body">
            <div class="j-form-message alert alert-error hide"></div>

            <fieldset>

                
<div class="j-name-input control-group">
    <label class="control-label">Название:</label>
    <div class="controls">
        <div class="input">
            <input class="    "
                   type="text"
                   name="name" />
        </div>
        
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


    </div>
</div>


                
    <div class="j-timezone_offset-input control-group">
        <label class="control-label">Часовой пояс:</label>
        <div class="controls">
            <div class="input">
                <select class="    "
                        name="timezone_offset">

                                            <option value="240">UTC +4</option>
                                            <option value="300">UTC +5</option>
                                            <option value="360">UTC +6</option>
                                            <option value="420">UTC +7</option>
                                            <option value="480">UTC +8</option>
                                            <option value="540">UTC +9</option>
                                            <option value="600">UTC +10</option>
                                            <option value="660">UTC +11</option>
                    
                </select>
            </div>

            
    <p class="help-block">
        <span class="j-message"></span>
        
    </p>


        </div>
    </div>



            </fieldset>
        </div>

        <div class="modal-footer">
            <a class="j-popup-close btn">Закрыть</a>
            <input type="submit" class="btn btn-primary" value="Добавить" />
        </div>
    </div>
    <div class="modal-backdrop"></div>
</form></div>

<div class="j-control-container hide">

    <tuna:template id="bakeries_list_template">
        <tuna:list tuna:target="t-list" tuna:path=""
                   tuna:item-renderer-id="bakeries_list_item_renderer"
                   tuna:item-template-id="bakery_template"
                   tuna:key-path="id" />

    </tuna:template>

    <tuna:template id="bakery_template">
        <tuna:attr tuna:name="data-id" tuna:path="id"
                   tuna:target="t-id" />

        <tuna:spot tuna:target="t-name" tuna:path="name" />
        <tuna:spot tuna:target="t-email" tuna:path="email" />
        <tuna:spot tuna:target="t-city" tuna:path="city" />
        <tuna:spot tuna:target="t-delivery-price" tuna:path="deliveryPrice" />

    </tuna:template>

    <table>
        <tbody>
            <tr id="bakeries_list_item_renderer">
                <td class="t-name">Имя</td>
                <td class="t-email">Email</td>
                <td class="t-city">Город</td>
                <td class="t-delivery-price">Цена доставки</td>
                <td>
                    <ul class="nav nav-list">
                        <li>
                            <a class="j-button t-id"
                               data-action="delete">
                                <i class="icon-trash"></i> Удалить
                            </a>
                        </li>
                    </ul>
                </td>
            </tr>
        </tbody>
    </table>

</div></div>

<div class="j-navigation-page page"
     data-name="application">

    <div class="page-header">
    <h1>Приложение</h1>
</div>

<div class="row">
    <div class="span12">

       <iframe id="application_frame" width="100%" height="900"
               scrolling="no" frameborder="0"></iframe>

    </div>
</div>

</div>

<div class="t-bakery-hidden row">

    <div class="span12">
        <form class="j-form j-template-transformer
                     t-bakery-disabled form-inline pull-right"
              data-name="bakery-selection"
              data-template-id="bakery_selection_template">

            <label>
                Кондитерская:

                <select name="bakery_id" class="t-bakery-select">
                    <option value="-1"></option>
                </select>
            </label>

            <input type="submit" class="btn" value="Выбрать" />
        </form>
    </div>

</div>

<div class="j-control-container hide">
    <tuna:template id="bakery_selection_template">
        
    <tuna:list tuna:target="t-bakery-select" tuna:path="/"
               tuna:item-renderer-id="option_renderer"
               tuna:item-template-id="bakery_option_template"
               tuna:key-path="id" />


    </tuna:template>

    <tuna:template id="bakery_option_template">
        
    <tuna:attr tuna:name="value"
               tuna:path="id"
                              tuna:target="t-option" />


        
    <tuna:spot tuna:path="name"
                           tuna:target="t-option" />


    </tuna:template>
</div>

        <div class="j-control-container hide">

            <select>
                <option id="option_renderer" class="t-option"></option>
            </select>

            <tuna:template id="global_template">

                    
        <tuna:if tuna:path="currentBakery" tuna:notset
                                     tuna:class="hide"
                                  tuna:target="t-current-bakery-exist" />

    
                
    <tuna:attr tuna:name="value"
               tuna:path="currentBakery/id"
                              tuna:target="t-current-bakery-id" />



                
    <tuna:spot tuna:path="currentUser/email"
                           tuna:target="t-current-user-email" />



                
    <tuna:spot tuna:path="currentUser/role"
                           tuna:target="t-current-user-role" />


                    
        <tuna:if tuna:path="currentUser/role" tuna:eq="1"
                                 tuna:class="disabled"
                                 tuna:target="t-bakery-disabled" />

    
                    
        <tuna:if tuna:path="currentUser/role" tuna:eq="1"
                                 tuna:class="hide"
                                 tuna:target="t-bakery-hidden" />

    

                
    <tuna:spot tuna:path="currentUser/roleName"
                           tuna:target="t-current-user-role-name" />



            </tuna:template>

        </div>

        <iframe id="api_frame" name="api_frame" class="hide"
                width="0" height="0"></iframe>

        <!--[if IE]>-->
            <script type="text/javascript" src="/js/json.js"></script>
        <!--<![endif]-->

        <script type="text/javascript" src="/js/sizzle.js"></script>
        <script type="text/javascript" src="/js/app.js"></script>

        <script type="text/javascript">main(document.body);</script>
    </body>
</html>